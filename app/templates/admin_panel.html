{% extends "base.html" %}
{% block content %}
<h2>Manage Threats</h2>

<!-- Insert Form -->
<form action="{{ url_for('main.insert_threat') }}" method="POST">
  <input type="text" name="id" placeholder="ID" required>
  <input type="text" name="name" placeholder="Name" required>
  <input type="text" name="description" placeholder="Description" required>
  <button type="submit">Add Threat</button>
</form>

<hr>

<!-- Existing Threats -->
<table border="1" cellpadding="5" cellspacing="0">
  <tr>
    <th>ID</th><th>Name</th><th>Description</th><th>Actions</th>
  </tr>
  {% for threat in threats %}
  <tr>
    <form action="{{ url_for('main.update_threat') }}" method="POST">
      <td><input type="text" name="id" value="{{ threat.ID }}" readonly></td>
      <td><input type="text" name="name" value="{{ threat.NAME }}"></td>
      <td><input type="text" name="description" value="{{ threat.DESCRIPTION }}"></td>
      <td>
        <button type="submit">Update</button>
    </form>
    <form action="{{ url_for('main.delete_threat') }}" method="POST" style="display:inline;">
      <input type="hidden" name="id" value="{{ threat.ID }}">
      <button type="submit" onclick="return confirm('Delete this threat?');">Delete</button>
    </form>
      </td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
